<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Reservar cita</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/reserva.css}">
</head>
<body class="bg-light min-vh-100 d-flex align-items-center justify-content-center p-5 position-relative">

  <!-- Botón Volver -->
  <input type="hidden" id="fechaSeleccionada" th:value="${fechaSeleccionada}">
  

  <div class="card shadow-lg rounded-3 p-4 mx-auto" style="max-width: 48rem;">
    <div style="margin-bottom: 1rem;">
        <a onclick="history.back()" 
          style="text-decoration: none; color: #555; font-size: 1rem; cursor: pointer; transition: color 0.3s, transform 0.3s;"
          onmouseover="this.style.color='#000'; this.style.transform='translateX(-5px)';"
          onmouseout="this.style.color='#555'; this.style.transform='translateX(0)';">
          ← Volver
        </a>
    </div> 
    
    <h2 class="h2 text-center fw-bold mb-4" th:text="'Reserva en ' + ${empresa.nombre}">Reserva en Empresa</h2>

    <!-- Navegación de mes -->
    <div class="d-flex align-items-center justify-content-center gap-3 mb-4">
      <button id="prevMonth" class="btn btn-light p-2">&#10094;</button>
      <span id="monthLabel" class="fs-5 fw-semibold text-capitalize">abril 2025</span>
      <button id="nextMonth" class="btn btn-light p-2">&#10095;</button>
    </div>

    <!-- Tira desplazable de días -->
    <div id="dias" class="d-flex gap-2 overflow-auto pb-2 user-select-none cursor-grab">
      <!-- JS rellena -->
    </div>

    <!-- Grid de horas -->
    <div id="horas" class="row row-cols-3 row-cols-sm-4 g-3 mt-4">
      <!-- JS rellena -->
    </div>

    <!-- Botón Confirmar Reserva -->
    <div class="mt-4 text-center">
      <button id="confirmarBtn" class="btn btn-light disabled" disabled>
        Confirmar reserva
      </button>
    </div>
  </div>

  <!-- Modal de feedback -->
  <div class="modal fade" id="feedbackModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <div class="modal-body text-center">
          <p id="modalMessage" class="fs-5 fw-semibold mb-4"></p>
          <button type="button" class="btn w-100" id="modalClose" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script th:inline="javascript">
    const empresaId = /*[[${empresa.id}]]*/ 0;
  </script>
  <script th:src="@{/js/reserva.js}"></script>

</body>
</html>
